"use strict";(self.webpackChunkneki99=self.webpackChunkneki99||[]).push([[450],{6450:(t,e,s)=>{s.r(e),s.d(e,{default:()=>x});var i=s(7528),n=s(7070),r=s(3747),o=s(7097),a=s(5399),c=s(6032);const d=async()=>{const t=[];try{const e=(0,c.P)((0,c.rJ)(a.db,"guestBook"),(0,c.My)("createdAt","desc"));return(await(0,c.GG)(e)).forEach((e=>{t.push(e.data())})),t}catch(e){throw console.error("Error fetching document:",e),e}},h=async t=>{await(0,c.gS)((0,c.rJ)(a.db,"guestBook"),{writer:t.writer,content:t.content,createdAt:t.createdAt})},l=()=>(0,r.I)({queryKey:["guestbook"],queryFn:d}),u=()=>(0,o.n)({mutationFn:h});var p,A,v=s(1152),g=s(4574),b=s(3105),w=s(5564),m=s(4858),f=s(1565),k=s(579);function x(){const{onClickWindowClose:t,windowRenderObj:e,onClickWindow:s}=(0,n.F)(),{refetch:i,data:r,isLoading:o}=l(),{mutate:a}=u(),{register:c,handleSubmit:d,reset:h}=(0,m.mN)();return(0,k.jsxs)(v.A,{width:"800px",top:"5%",left:"10%",zIndex:e.guestBookWindow.zIndexValue,onClick:t=>s("guestBookWindow",t),children:[(0,k.jsx)(v.A.Header,{onClick:e=>t("guestBookWindow",e),children:"\ubc29\uba85\ub85d"}),(0,k.jsx)(v.A.HeadMenu,{}),(0,k.jsx)(v.A.Content,{children:(0,k.jsx)(v.A.ContentSection,{height:"200px",children:(0,k.jsx)(v.A.ScrollView,{width:"100%",background:"white",children:!o&&r.map((t=>(0,k.jsxs)(y,{children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)("span",{children:t.writer}),(0,k.jsx)("span",{children:t.createdAt})]}),(0,k.jsx)(b.oz,{children:t.content})]})))})})}),(0,k.jsxs)(v.A.Footer,{children:[(0,k.jsx)(v.A.Input,{width:"50%",placeholder:"\uc774\ub984\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:c("writer")}),(0,k.jsx)(v.A.Input,{width:"100%",rows:4,placeholder:"\ubc29\uba85\ub85d\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",multiline:!0,registerFn:c("content")}),(0,k.jsx)(S,{children:(0,k.jsx)(v.A.Button,{width:"20%",onClick:d((t=>{""!==t.writer&&""!==t.content&&(t.createdAt=(0,f.A)(),a(t,{onSuccess:()=>{h({content:"",writer:""}),i()}}))})),children:"\ub4f1\ub85d"})})]})]})}const y=g.Ay.div(p||(p=(0,i.A)(["\n  padding: 5px;\n  border-bottom: 2px solid;\n  border-color: rgb(223, 223, 223) rgb(10, 10, 10) rgb(10, 10, 10) rgb(223, 223, 223);\n"]))),S=(0,g.Ay)(w.Me)(A||(A=(0,i.A)(["\n  display: flex;\n  justify-content: flex-end;\n  padding-right: 0;\n"])))},5399:(t,e,s)=>{s.d(e,{I:()=>c,db:()=>a});var i=s(7064),n=s(6032),r=s(8147);const o=(0,i.Wp)({apiKey:"AIzaSyDPNsFfkdl2fwo4vyMJRC3Wr053XlW7zGs",authDomain:"neki99-7324a.firebaseapp.com",projectId:"neki99-7324a",storageBucket:"neki99-7324a.appspot.com",messagingSenderId:"1043899751655",appId:"1:1043899751655:web:478037e3c7986ab7e71642",measurementId:"G-GTXK2JTFGH"}),a=(0,n.aU)(o),c=(0,r.c7)(o)},1565:(t,e,s)=>{function i(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(s,"-").concat(i," ").concat(n,":").concat(r,":").concat(o)}s.d(e,{A:()=>i})},7097:(t,e,s)=>{s.d(e,{n:()=>y});var i,n,r,o,a,c=s(5043),d=s(9790),h=s(5149),l=s(8458),u=s(6562),p=s(4558),A=s(5239),v=s(1454),g=s(329),b=s(9723),w=(i=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakMap,a=new WeakSet,class extends g.Q{constructor(t,e){super(),(0,d.A)(this,a),(0,h.A)(this,i,void 0),(0,h.A)(this,n,void 0),(0,h.A)(this,r,void 0),(0,h.A)(this,o,void 0),(0,p.A)(i,this,t),this.setOptions(e),this.bindMethods(),(0,u.A)(a,this,m).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const s=this.options;this.options=(0,l.A)(i,this).defaultMutationOptions(t),(0,b.f8)(this.options,s)||(0,l.A)(i,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,l.A)(r,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&(0,b.EN)(s.mutationKey)!==(0,b.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,l.A)(r,this))||void 0===e?void 0:e.state.status)&&(0,l.A)(r,this).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,l.A)(r,this))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,u.A)(a,this,m).call(this),(0,u.A)(a,this,f).call(this,t)}getCurrentResult(){return(0,l.A)(n,this)}reset(){var t;null===(t=(0,l.A)(r,this))||void 0===t||t.removeObserver(this),(0,p.A)(r,this,void 0),(0,u.A)(a,this,m).call(this),(0,u.A)(a,this,f).call(this)}mutate(t,e){var s;return(0,p.A)(o,this,e),null===(s=(0,l.A)(r,this))||void 0===s||s.removeObserver(this),(0,p.A)(r,this,(0,l.A)(i,this).getMutationCache().build((0,l.A)(i,this),this.options)),(0,l.A)(r,this).addObserver(this),(0,l.A)(r,this).execute(t)}});function m(){var t,e;const s=null!==(t=null===(e=(0,l.A)(r,this))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,A.$)();(0,p.A)(n,this,{...s,isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset})}function f(t){v.j.batch((()=>{if((0,l.A)(o,this)&&this.hasListeners()){const u=(0,l.A)(n,this).variables,p=(0,l.A)(n,this).context;var e,s,i,r;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(s=(0,l.A)(o,this)).onSuccess)||void 0===e||e.call(s,t.data,u,p),null===(i=(r=(0,l.A)(o,this)).onSettled)||void 0===i||i.call(r,t.data,null,u,p);else if("error"===(null===t||void 0===t?void 0:t.type)){var a,c,d,h;null===(a=(c=(0,l.A)(o,this)).onError)||void 0===a||a.call(c,t.error,u,p),null===(d=(h=(0,l.A)(o,this)).onSettled)||void 0===d||d.call(h,void 0,t.error,u,p)}}this.listeners.forEach((t=>{t((0,l.A)(n,this))}))}))}var k=s(3248),x=s(3247);function y(t,e){const s=(0,k.jE)(e),[i]=c.useState((()=>new w(s,t)));c.useEffect((()=>{i.setOptions(t)}),[i,t]);const n=c.useSyncExternalStore(c.useCallback((t=>i.subscribe(v.j.batchCalls(t))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),r=c.useCallback(((t,e)=>{i.mutate(t,e).catch(x.l)}),[i]);if(n.error&&(0,x.G)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:r,mutateAsync:n.mutate}}}}]);
//# sourceMappingURL=450.28f6b31e.chunk.js.map