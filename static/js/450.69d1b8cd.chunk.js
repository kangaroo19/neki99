"use strict";(self.webpackChunkneki99=self.webpackChunkneki99||[]).push([[450],{6450:(t,e,i)=>{i.r(e),i.d(e,{default:()=>O});var s=i(7528),n=i(7070),o=i(3747),r=i(7097),d=i(5399),a=i(6032);const c=async()=>{const t=[];try{const e=(0,a.P)((0,a.rJ)(d.db,"guestBook"),(0,a.My)("createdAt","desc"));return(await(0,a.GG)(e)).forEach((e=>{t.push(e.data())})),t}catch(e){throw console.error("Error fetching document:",e),e}},h=async t=>{await(0,a.gS)((0,a.rJ)(d.db,"guestBook"),{writer:t.writer,content:t.content,createdAt:t.createdAt})},A=()=>(0,o.I)({queryKey:["guestbook"],queryFn:c}),_=()=>(0,r.n)({mutationFn:h});var l,u,S=i(1152),E=i(4574),T=i(3105),v=i(5564),p=i(4858),C=i(1565),P=i(579);function O(){const{onClickWindowClose:t,windowRenderObj:e,onClickWindow:i}=(0,n.F)(),{refetch:s,data:o,isLoading:r}=A(),{mutate:d}=_(),{register:a,handleSubmit:c,reset:h}=(0,p.mN)();return(0,P.jsxs)(S.A,{width:"800px",top:"5%",left:"10%",zIndex:e.guestBookWindow.zIndexValue,onClick:t=>i("guestBookWindow",t),children:[(0,P.jsx)(S.A.Header,{onClick:e=>t("guestBookWindow",e),children:"\ubc29\uba85\ub85d"}),(0,P.jsx)(S.A.HeadMenu,{}),(0,P.jsx)(S.A.Content,{children:(0,P.jsx)(S.A.ContentSection,{height:"200px",children:(0,P.jsx)(S.A.ScrollView,{width:"100%",background:"white",children:!r&&o.map((t=>(0,P.jsxs)(R,{children:[(0,P.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,P.jsx)("span",{children:t.writer}),(0,P.jsx)("span",{children:t.createdAt})]}),(0,P.jsx)(T.oz,{children:t.content})]})))})})}),(0,P.jsxs)(S.A.Footer,{children:[(0,P.jsx)(S.A.Input,{width:"50%",placeholder:"\uc774\ub984\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:a("writer")}),(0,P.jsx)(S.A.Input,{width:"100%",rows:4,placeholder:"\ubc29\uba85\ub85d\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",multiline:!0,registerFn:a("content")}),(0,P.jsx)(g,{children:(0,P.jsx)(S.A.Button,{width:"20%",onClick:c((t=>{""!==t.writer&&""!==t.content&&(t.createdAt=(0,C.A)(),d(t,{onSuccess:()=>{h({content:"",writer:""}),s()}}))})),children:"\ub4f1\ub85d"})})]})]})}const R=E.Ay.div(l||(l=(0,s.A)(["\n  padding: 5px;\n  border-bottom: 2px solid;\n  border-color: rgb(223, 223, 223) rgb(10, 10, 10) rgb(10, 10, 10) rgb(223, 223, 223);\n"]))),g=(0,E.Ay)(v.Me)(u||(u=(0,s.A)(["\n  display: flex;\n  justify-content: flex-end;\n  padding-right: 0;\n"])))},5399:(t,e,i)=>{i.d(e,{I:()=>c,db:()=>a});var s=i(7064),n=i(6032),o=i(8147);const r={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"123"}.REACT_APP_MEASUREMENT_ID},d=(0,s.Wp)(r),a=(0,n.aU)(d),c=(0,o.c7)(d)},1565:(t,e,i)=>{function s(){const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(i,"-").concat(s," ").concat(n,":").concat(o,":").concat(r)}i.d(e,{A:()=>s})},7097:(t,e,i)=>{i.d(e,{n:()=>R});var s,n,o,r,d,a=i(5043),c=i(9790),h=i(5149),A=i(8458),_=i(6562),l=i(4558),u=i(5239),S=i(1454),E=i(329),T=i(9723),v=(s=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,d=new WeakSet,class extends E.Q{constructor(t,e){super(),(0,c.A)(this,d),(0,h.A)(this,s,void 0),(0,h.A)(this,n,void 0),(0,h.A)(this,o,void 0),(0,h.A)(this,r,void 0),(0,l.A)(s,this,t),this.setOptions(e),this.bindMethods(),(0,_.A)(d,this,p).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const i=this.options;this.options=(0,A.A)(s,this).defaultMutationOptions(t),(0,T.f8)(this.options,i)||(0,A.A)(s,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,A.A)(o,this),observer:this}),null!==i&&void 0!==i&&i.mutationKey&&this.options.mutationKey&&(0,T.EN)(i.mutationKey)!==(0,T.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,A.A)(o,this))||void 0===e?void 0:e.state.status)&&(0,A.A)(o,this).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,A.A)(o,this))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,_.A)(d,this,p).call(this),(0,_.A)(d,this,C).call(this,t)}getCurrentResult(){return(0,A.A)(n,this)}reset(){var t;null===(t=(0,A.A)(o,this))||void 0===t||t.removeObserver(this),(0,l.A)(o,this,void 0),(0,_.A)(d,this,p).call(this),(0,_.A)(d,this,C).call(this)}mutate(t,e){var i;return(0,l.A)(r,this,e),null===(i=(0,A.A)(o,this))||void 0===i||i.removeObserver(this),(0,l.A)(o,this,(0,A.A)(s,this).getMutationCache().build((0,A.A)(s,this),this.options)),(0,A.A)(o,this).addObserver(this),(0,A.A)(o,this).execute(t)}});function p(){var t,e;const i=null!==(t=null===(e=(0,A.A)(o,this))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,u.$)();(0,l.A)(n,this,{...i,isPending:"pending"===i.status,isSuccess:"success"===i.status,isError:"error"===i.status,isIdle:"idle"===i.status,mutate:this.mutate,reset:this.reset})}function C(t){S.j.batch((()=>{if((0,A.A)(r,this)&&this.hasListeners()){const _=(0,A.A)(n,this).variables,l=(0,A.A)(n,this).context;var e,i,s,o;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(i=(0,A.A)(r,this)).onSuccess)||void 0===e||e.call(i,t.data,_,l),null===(s=(o=(0,A.A)(r,this)).onSettled)||void 0===s||s.call(o,t.data,null,_,l);else if("error"===(null===t||void 0===t?void 0:t.type)){var d,a,c,h;null===(d=(a=(0,A.A)(r,this)).onError)||void 0===d||d.call(a,t.error,_,l),null===(c=(h=(0,A.A)(r,this)).onSettled)||void 0===c||c.call(h,void 0,t.error,_,l)}}this.listeners.forEach((t=>{t((0,A.A)(n,this))}))}))}var P=i(3248),O=i(3247);function R(t,e){const i=(0,P.jE)(e),[s]=a.useState((()=>new v(i,t)));a.useEffect((()=>{s.setOptions(t)}),[s,t]);const n=a.useSyncExternalStore(a.useCallback((t=>s.subscribe(S.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=a.useCallback(((t,e)=>{s.mutate(t,e).catch(O.l)}),[s]);if(n.error&&(0,O.G)(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}}}]);
//# sourceMappingURL=450.69d1b8cd.chunk.js.map