"use strict";(self.webpackChunkneki99=self.webpackChunkneki99||[]).push([[219],{106:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(1152),o=n(7528),r=n(5043),i=n(2823),l=n.n(i),c=(n(5884),n(5399)),s=n(8147),d=n(7008),u=n.n(d),g=n(5952),m=n(7709),p=(n(7799),n(4858));const h=()=>{const[e,t]=(0,r.useState)(""),n=(0,r.useRef)(null);return{imageHandler:()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.addEventListener("change",(async()=>{const a=n.current.getEditor(),o=e.files[0],r=a.getSelection(!0);try{const e=(0,s.KR)(c.I,"image/".concat(Date.now()));await(0,s.D)(e,o).then((e=>{(0,s.qk)(e.ref).then((e=>{a.insertEmbed(r.index,"image",e),a.setSelection(r.index+1),console.log("url \ud655\uc778",e),t(e)}))}))}catch(i){console.log(i)}}))},quillRef:n,imageUrl:e}};var b,v=n(4574),f=n(579);function k(e){let{updateData:t}=e;const{imageHandler:n,quillRef:a,imageUrl:o}=h(),l=(0,r.useMemo)((()=>({toolbar:{container:[["image","link","video","code-block"],[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}]],handlers:{image:n}},syntax:{highlight:e=>m.A.highlightAuto(e).value},imageDropAndPaste:{},ImageResize:{parchment:i.Quill.import("parchment"),mopdules:["Resize","DisplaySize"]}})),[]),{getValues:c,setValue:s}=(0,p.xW)();return(0,r.useEffect)((()=>{s("content",t)}),[]),(0,f.jsx)("div",{className:"ql-snow",children:(0,f.jsx)(y,{className:"ql-editor",ref:a,theme:"snow",placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",onChange:e=>{s("content",e)},modules:l,formats:["header","bold","italic","underline","strike","blockquote","image","code-block","list","link"],value:c("content")})})}i.Quill.register("modules/ImageResize",u()),i.Quill.register("modules/imageDropAndPaste",g.A),m.A.configure({languages:["javascript","ruby","python","rust"]});const y=(0,v.Ay)(l())(b||(b=(0,o.A)(["\n  & > .ql-toolbar {\n    position: sticky;\n  }\n  & > .ql-container {\n    overflow-x: hidden;\n    height: 300px;\n  }\n"])));var x=n(5917),S=n(3216);function A(){const e=(0,p.mN)(),t=(0,S.zy)().state;console.log(t);const n=(0,S.Zp)(),{mutate:o}=(0,x._)();return(0,f.jsxs)(p.Op,{...e,children:[(0,f.jsx)(p.xI,{name:"category",control:e.control,defaultValue:t&&t.category,render:e=>{let{field:t}=e;return(0,f.jsxs)("select",{...t,children:[(0,f.jsx)("option",{value:"",children:"\uc120\ud0dd\ud558\uc138\uc694"}),(0,f.jsx)("option",{value:"react",children:"\ub9ac\uc561\ud2b8"}),(0,f.jsx)("option",{value:"javascript",children:"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8"}),(0,f.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})}}),(0,f.jsx)(a.A.Input,{width:"100%",placeholder:"\uc81c\ubaa9\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:e.register("title",{value:null===t||void 0===t?void 0:t.title})}),(0,f.jsx)(a.A.Input,{width:"100%",placeholder:"\uc694\uc57d\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:e.register("summary",{value:null===t||void 0===t?void 0:t.summary})}),(0,f.jsx)(k,{updateData:null===t||void 0===t?void 0:t.content}),(0,f.jsx)(a.A.Button,{onClick:e.handleSubmit((e=>((e,t)=>{o({method:e,data:t},{onSuccess:()=>{n("/blog")}})})("post",e))),children:"\uc804\uc1a1"})]})}},5399:(e,t,n)=>{n.d(t,{I:()=>c,db:()=>l});var a=n(7064),o=n(6032),r=n(8147);const i=(0,a.Wp)({apiKey:"AIzaSyDPNsFfkdl2fwo4vyMJRC3Wr053XlW7zGs",authDomain:"neki99-7324a.firebaseapp.com",projectId:"neki99-7324a",storageBucket:"neki99-7324a.appspot.com",messagingSenderId:"1043899751655",appId:"1:1043899751655:web:478037e3c7986ab7e71642",measurementId:"G-GTXK2JTFGH"}),l=(0,o.aU)(i),c=(0,r.c7)(i)},1565:(e,t,n)=>{function a(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a," ").concat(o,":").concat(r,":").concat(i)}n.d(t,{A:()=>a})},8499:(e,t,n)=>{n.d(t,{A:()=>o});const a=n.p+"static/media/noImg.d01f81a0627ebc34dc35.webp";function o(e){const t=(new DOMParser).parseFromString(e,"text/html").querySelector("img");return t?t.src:a}},5917:(e,t,n)=>{n.d(t,{_:()=>u});var a=n(7097),o=n(5399),r=n(6032),i=n(1565),l=n(8499);const c=async e=>{const t=(0,r.H9)((0,r.rJ)(o.db,"blog"));await(0,r.BN)(t,{category:e.category,content:e.content,title:e.title,img:(0,l.A)(e.content),summary:e.summary,createdAt:(0,i.A)(),id:t.id})},s=async e=>{console.log(e),await(0,r.kd)((0,r.H9)(o.db,"blog",e))},d=e=>{console.log(e)},u=()=>(0,a.n)({mutationKey:["blogMutate"],mutationFn:e=>(e=>{switch(e.method){case"post":return c(e.data);case"delete":return s(e.data);case"update":return d(e)}})(e)})}}]);
//# sourceMappingURL=219.3fd18fed.chunk.js.map