"use strict";(self.webpackChunkneki99=self.webpackChunkneki99||[]).push([[450],{6450:(t,e,i)=>{i.r(e),i.d(e,{default:()=>P});var s=i(7528),o=i(7070),n=i(3747),r=i(7097),d=i(5399),a=i(6032);const h=async()=>{const t=[];try{const e=(0,a.P)((0,a.rJ)(d.db,"guestBook"),(0,a.My)("createdAt","desc"));return(await(0,a.GG)(e)).forEach((e=>{t.push(e.data())})),t}catch(e){throw console.error("Error fetching document:",e),e}},c=async t=>{await(0,a.gS)((0,a.rJ)(d.db,"guestBook"),{writer:t.writer,content:t.content,createdAt:t.createdAt})},l=()=>(0,n.I)({queryKey:["guestbook"],queryFn:h}),A=()=>(0,r.n)({mutationFn:c});var _,u,S=i(1152),E=i(4574),p=i(3105),T=i(5564),C=i(4858),O=i(1565),v=i(579);function P(){const{onClickWindowClose:t,windowRenderObj:e,onClickWindow:i}=(0,o.F)(),{refetch:s,data:n,isLoading:r}=l(),{mutate:d}=A(),{register:a,handleSubmit:h,reset:c}=(0,C.mN)();return(0,v.jsxs)(S.A,{width:"800px",top:"5%",left:"10%",zIndex:e.guestBookWindow.zIndexValue,onClick:t=>i("guestBookWindow",t),children:[(0,v.jsx)(S.A.Header,{onClick:e=>t("guestBookWindow",e),children:"\ubc29\uba85\ub85d"}),(0,v.jsx)(S.A.HeadMenu,{}),(0,v.jsx)(S.A.Content,{children:(0,v.jsx)(S.A.ContentSection,{height:"200px",children:(0,v.jsx)(S.A.ScrollView,{width:"100%",background:"white",children:!r&&n.map((t=>(0,v.jsxs)(R,{children:[(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,v.jsx)("span",{children:t.writer}),(0,v.jsx)("span",{children:t.createdAt})]}),(0,v.jsx)(p.oz,{children:t.content})]})))})})}),(0,v.jsxs)(S.A.Footer,{children:[(0,v.jsx)(S.A.Input,{width:"50%",placeholder:"\uc774\ub984\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:a("writer")}),(0,v.jsx)(S.A.Input,{width:"100%",rows:4,placeholder:"\ubc29\uba85\ub85d\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",multiline:!0,registerFn:a("content")}),(0,v.jsx)(D,{children:(0,v.jsx)(S.A.Button,{width:"20%",onClick:h((t=>{""!==t.writer&&""!==t.content&&(t.createdAt=(0,O.A)(),d(t,{onSuccess:()=>{c({content:"",writer:""}),s()}}))})),children:"\ub4f1\ub85d"})})]})]})}const R=E.Ay.div(_||(_=(0,s.A)(["\n  padding: 5px;\n  border-bottom: 2px solid;\n  border-color: rgb(223, 223, 223) rgb(10, 10, 10) rgb(10, 10, 10) rgb(223, 223, 223);\n"]))),D=(0,E.Ay)(T.Me)(u||(u=(0,s.A)(["\n  display: flex;\n  justify-content: flex-end;\n  padding-right: 0;\n"])))},5399:(t,e,i)=>{i.d(e,{I:()=>h,db:()=>a});var s=i(7064),o=i(6032),n=i(8147);const r={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GITHUB_API_KEY:"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"}.REACT_APP_MEASUREMENT_ID},d=(0,s.Wp)(r),a=(0,o.aU)(d),h=(0,n.c7)(d)},1565:(t,e,i)=>{function s(){const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(i,"-").concat(s," ").concat(o,":").concat(n,":").concat(r)}i.d(e,{A:()=>s})},7097:(t,e,i)=>{i.d(e,{n:()=>R});var s,o,n,r,d,a=i(5043),h=i(9790),c=i(5149),l=i(8458),A=i(6562),_=i(4558),u=i(5239),S=i(1454),E=i(329),p=i(9723),T=(s=new WeakMap,o=new WeakMap,n=new WeakMap,r=new WeakMap,d=new WeakSet,class extends E.Q{constructor(t,e){super(),(0,h.A)(this,d),(0,c.A)(this,s,void 0),(0,c.A)(this,o,void 0),(0,c.A)(this,n,void 0),(0,c.A)(this,r,void 0),(0,_.A)(s,this,t),this.setOptions(e),this.bindMethods(),(0,A.A)(d,this,C).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const i=this.options;this.options=(0,l.A)(s,this).defaultMutationOptions(t),(0,p.f8)(this.options,i)||(0,l.A)(s,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,l.A)(n,this),observer:this}),null!==i&&void 0!==i&&i.mutationKey&&this.options.mutationKey&&(0,p.EN)(i.mutationKey)!==(0,p.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,l.A)(n,this))||void 0===e?void 0:e.state.status)&&(0,l.A)(n,this).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,l.A)(n,this))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,A.A)(d,this,C).call(this),(0,A.A)(d,this,O).call(this,t)}getCurrentResult(){return(0,l.A)(o,this)}reset(){var t;null===(t=(0,l.A)(n,this))||void 0===t||t.removeObserver(this),(0,_.A)(n,this,void 0),(0,A.A)(d,this,C).call(this),(0,A.A)(d,this,O).call(this)}mutate(t,e){var i;return(0,_.A)(r,this,e),null===(i=(0,l.A)(n,this))||void 0===i||i.removeObserver(this),(0,_.A)(n,this,(0,l.A)(s,this).getMutationCache().build((0,l.A)(s,this),this.options)),(0,l.A)(n,this).addObserver(this),(0,l.A)(n,this).execute(t)}});function C(){var t,e;const i=null!==(t=null===(e=(0,l.A)(n,this))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,u.$)();(0,_.A)(o,this,{...i,isPending:"pending"===i.status,isSuccess:"success"===i.status,isError:"error"===i.status,isIdle:"idle"===i.status,mutate:this.mutate,reset:this.reset})}function O(t){S.j.batch((()=>{if((0,l.A)(r,this)&&this.hasListeners()){const A=(0,l.A)(o,this).variables,_=(0,l.A)(o,this).context;var e,i,s,n;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(i=(0,l.A)(r,this)).onSuccess)||void 0===e||e.call(i,t.data,A,_),null===(s=(n=(0,l.A)(r,this)).onSettled)||void 0===s||s.call(n,t.data,null,A,_);else if("error"===(null===t||void 0===t?void 0:t.type)){var d,a,h,c;null===(d=(a=(0,l.A)(r,this)).onError)||void 0===d||d.call(a,t.error,A,_),null===(h=(c=(0,l.A)(r,this)).onSettled)||void 0===h||h.call(c,void 0,t.error,A,_)}}this.listeners.forEach((t=>{t((0,l.A)(o,this))}))}))}var v=i(3248),P=i(3247);function R(t,e){const i=(0,v.jE)(e),[s]=a.useState((()=>new T(i,t)));a.useEffect((()=>{s.setOptions(t)}),[s,t]);const o=a.useSyncExternalStore(a.useCallback((t=>s.subscribe(S.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),n=a.useCallback(((t,e)=>{s.mutate(t,e).catch(P.l)}),[s]);if(o.error&&(0,P.G)(s.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:n,mutateAsync:o.mutate}}}}]);
//# sourceMappingURL=450.d9949763.chunk.js.map