"use strict";(self.webpackChunkneki99=self.webpackChunkneki99||[]).push([[450],{6450:(t,e,i)=>{i.r(e),i.d(e,{default:()=>g});var s=i(7528),n=i(7070),o=i(3747),r=i(7097),d=i(5399),a=i(6032);const c=async()=>{const t=[];try{const e=(0,a.P)((0,a.rJ)(d.db,"guestBook"),(0,a.My)("createdAt","desc"));return(await(0,a.GG)(e)).forEach((e=>{t.push(e.data())})),t}catch(e){throw console.error("Error fetching document:",e),e}},h=async t=>{await(0,a.gS)((0,a.rJ)(d.db,"guestBook"),{writer:t.writer,content:t.content,createdAt:t.createdAt})},l=()=>(0,o.I)({queryKey:["guestbook"],queryFn:c}),u=()=>(0,r.n)({mutationFn:h});var A,S,_=i(1152),E=i(4574),v=i(3105),p=i(5564),T=i(4858),O=i(1565),C=i(579);function g(){const{onClickWindowClose:t,windowRenderObj:e,onClickWindow:i}=(0,n.F)(),{refetch:s,data:o,isLoading:r}=l(),{mutate:d}=u(),{register:a,handleSubmit:c,reset:h}=(0,T.mN)();return(0,C.jsxs)(_.A,{width:"800px",top:"5%",left:"10%",zIndex:e.guestBookWindow.zIndexValue,onClick:t=>i("guestBookWindow",t),children:[(0,C.jsx)(_.A.Header,{onClick:e=>t("guestBookWindow",e),children:"\ubc29\uba85\ub85d"}),(0,C.jsx)(_.A.HeadMenu,{}),(0,C.jsx)(_.A.Content,{children:(0,C.jsx)(_.A.ContentSection,{height:"200px",children:(0,C.jsx)(_.A.ScrollView,{width:"100%",background:"white",children:!r&&o.map((t=>(0,C.jsxs)(R,{children:[(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsx)("span",{children:t.writer}),(0,C.jsx)("span",{children:t.createdAt})]}),(0,C.jsx)(v.oz,{children:t.content})]})))})})}),(0,C.jsxs)(_.A.Footer,{children:[(0,C.jsx)(_.A.Input,{width:"50%",placeholder:"\uc774\ub984\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",registerFn:a("writer")}),(0,C.jsx)(_.A.Input,{width:"100%",rows:4,placeholder:"\ubc29\uba85\ub85d\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694",multiline:!0,registerFn:a("content")}),(0,C.jsx)(P,{children:(0,C.jsx)(_.A.Button,{width:"20%",onClick:c((t=>{""!==t.writer&&""!==t.content&&(t.createdAt=(0,O.A)(),d(t,{onSuccess:()=>{h({content:"",writer:""}),s()}}))})),children:"\ub4f1\ub85d"})})]})]})}const R=E.Ay.div(A||(A=(0,s.A)(["\n  padding: 5px;\n  border-bottom: 2px solid;\n  border-color: rgb(223, 223, 223) rgb(10, 10, 10) rgb(10, 10, 10) rgb(223, 223, 223);\n"]))),P=(0,E.Ay)(p.Me)(S||(S=(0,s.A)(["\n  display: flex;\n  justify-content: flex-end;\n  padding-right: 0;\n"])))},5399:(t,e,i)=>{i.d(e,{I:()=>c,db:()=>a});var s=i(7064),n=i(6032),o=i(8147);const r={apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_KEY,authDomain:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AUTH_DOMAIN,projectId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_PROJECT_ID,storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MEASUREMENT_ID},d=(0,s.Wp)(r),a=(0,n.aU)(d),c=(0,o.c7)(d)},1565:(t,e,i)=>{function s(){const t=new Date,e=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(i,"-").concat(s," ").concat(n,":").concat(o,":").concat(r)}i.d(e,{A:()=>s})},7097:(t,e,i)=>{i.d(e,{n:()=>R});var s,n,o,r,d,a=i(5043),c=i(9790),h=i(5149),l=i(8458),u=i(6562),A=i(4558),S=i(5239),_=i(1454),E=i(329),v=i(9723),p=(s=new WeakMap,n=new WeakMap,o=new WeakMap,r=new WeakMap,d=new WeakSet,class extends E.Q{constructor(t,e){super(),(0,c.A)(this,d),(0,h.A)(this,s,void 0),(0,h.A)(this,n,void 0),(0,h.A)(this,o,void 0),(0,h.A)(this,r,void 0),(0,A.A)(s,this,t),this.setOptions(e),this.bindMethods(),(0,u.A)(d,this,T).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const i=this.options;this.options=(0,l.A)(s,this).defaultMutationOptions(t),(0,v.f8)(this.options,i)||(0,l.A)(s,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,l.A)(o,this),observer:this}),null!==i&&void 0!==i&&i.mutationKey&&this.options.mutationKey&&(0,v.EN)(i.mutationKey)!==(0,v.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(e=(0,l.A)(o,this))||void 0===e?void 0:e.state.status)&&(0,l.A)(o,this).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(null===(t=(0,l.A)(o,this))||void 0===t||t.removeObserver(this))}onMutationUpdate(t){(0,u.A)(d,this,T).call(this),(0,u.A)(d,this,O).call(this,t)}getCurrentResult(){return(0,l.A)(n,this)}reset(){var t;null===(t=(0,l.A)(o,this))||void 0===t||t.removeObserver(this),(0,A.A)(o,this,void 0),(0,u.A)(d,this,T).call(this),(0,u.A)(d,this,O).call(this)}mutate(t,e){var i;return(0,A.A)(r,this,e),null===(i=(0,l.A)(o,this))||void 0===i||i.removeObserver(this),(0,A.A)(o,this,(0,l.A)(s,this).getMutationCache().build((0,l.A)(s,this),this.options)),(0,l.A)(o,this).addObserver(this),(0,l.A)(o,this).execute(t)}});function T(){var t,e;const i=null!==(t=null===(e=(0,l.A)(o,this))||void 0===e?void 0:e.state)&&void 0!==t?t:(0,S.$)();(0,A.A)(n,this,{...i,isPending:"pending"===i.status,isSuccess:"success"===i.status,isError:"error"===i.status,isIdle:"idle"===i.status,mutate:this.mutate,reset:this.reset})}function O(t){_.j.batch((()=>{if((0,l.A)(r,this)&&this.hasListeners()){const u=(0,l.A)(n,this).variables,A=(0,l.A)(n,this).context;var e,i,s,o;if("success"===(null===t||void 0===t?void 0:t.type))null===(e=(i=(0,l.A)(r,this)).onSuccess)||void 0===e||e.call(i,t.data,u,A),null===(s=(o=(0,l.A)(r,this)).onSettled)||void 0===s||s.call(o,t.data,null,u,A);else if("error"===(null===t||void 0===t?void 0:t.type)){var d,a,c,h;null===(d=(a=(0,l.A)(r,this)).onError)||void 0===d||d.call(a,t.error,u,A),null===(c=(h=(0,l.A)(r,this)).onSettled)||void 0===c||c.call(h,void 0,t.error,u,A)}}this.listeners.forEach((t=>{t((0,l.A)(n,this))}))}))}var C=i(3248),g=i(3247);function R(t,e){const i=(0,C.jE)(e),[s]=a.useState((()=>new p(i,t)));a.useEffect((()=>{s.setOptions(t)}),[s,t]);const n=a.useSyncExternalStore(a.useCallback((t=>s.subscribe(_.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=a.useCallback(((t,e)=>{s.mutate(t,e).catch(g.l)}),[s]);if(n.error&&(0,g.G)(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}}}]);
//# sourceMappingURL=450.169705bf.chunk.js.map