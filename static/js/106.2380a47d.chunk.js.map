{"version":3,"file":"static/js/106.2380a47d.chunk.js","mappings":"yQAMA,MAoCA,EApCwBA,KACtB,MAAOC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,IACnCC,GAAWC,EAAAA,EAAAA,QAAO,MA+BxB,MAAO,CAAEC,aA7BYA,KACnB,MAAMC,EAAQC,SAASC,cAAc,SACrCF,EAAMG,aAAa,OAAQ,QAC3BH,EAAMG,aAAa,SAAU,WAC7BH,EAAMI,QACNJ,EAAMK,iBAAiB,UAAUC,UAC/B,MAAMC,EAASV,EAASW,QAAQC,YAC1BC,EAAOV,EAAMW,MAAM,GACnBC,EAAQL,EAAOM,cAAa,GAClC,IAEE,MAAMC,GAAaC,EAAAA,EAAAA,IAAIC,EAAAA,EAAQ,SAADC,OAAWC,KAAKC,cAExCC,EAAAA,EAAAA,GAAYN,EAAYJ,GAAMW,MAAKC,KACvCC,EAAAA,EAAAA,IAAeD,EAASP,KAAKM,MAAKG,IAEhCjB,EAAOkB,YAAYb,EAAMc,MAAO,QAASF,GAEzCjB,EAAOoB,aAAaf,EAAMc,MAAQ,GAClCE,QAAQC,IAAI,mBAAUL,GACtB7B,EAAY6B,EAAI,GAChB,GAEN,CAAE,MAAOM,GACPF,QAAQC,IAAIC,EACd,IACA,EAGmBjC,WAAUH,WAAU,E,yBCjB9B,SAASqC,IACtB,MAAM,aAAEhC,EAAY,SAAEF,EAAQ,SAAEH,GAAaD,IAIvCuC,GAAUC,EAAAA,EAAAA,UAAQ,KACf,CACLC,QAAS,CACPC,UAAW,CACT,CAAC,QAAS,OAAQ,QAAS,cAC3B,CAAC,CAAEC,OAAQ,CAAC,EAAG,EAAG,GAAG,KACrB,CAAC,OAAQ,SAAU,YAAa,SAAU,cAC1C,CAAC,CAAEC,MAAO,IAAM,CAAEC,WAAY,KAC9B,CAAC,CAAEC,KAAM,WAAa,CAAEA,KAAM,YAEhCC,SAAU,CACRC,MAAO1C,IAGX2C,OAAQ,CACNC,UAAWC,GAAQC,EAAAA,EAAKC,cAAcF,GAAMG,OAE9CC,kBAAmB,CACjB,EAEFC,YAAa,CACXC,UAAWC,EAAAA,MAAMC,OAAO,aACxBC,SAAU,CAAC,SAAU,mBAGxB,KAcG,UAAEC,EAAS,SAAEC,IAAaC,EAAAA,EAAAA,MAOhC,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAASC,UACtBF,EAAAA,EAAAA,KAACG,EAAgB,CACfF,UAAU,YACV3C,IAAKlB,EACLgE,MAAM,OACNC,YAAY,2DACZC,SAZeC,IACnBT,EAAS,UAAWS,GACpBpC,QAAQC,IAAImC,EAAQ,EAWhBhC,QAASA,EACTiC,QA5BU,CACd,SACA,OACA,SACA,YACA,SACA,aACA,QACA,aACA,OACA,QAmBIlB,MAAOO,EAAU,cAIzB,CAxEAH,EAAAA,MAAMe,SAAS,sBAAuBjB,KACtCE,EAAAA,MAAMe,SAAS,4BAA6BC,EAAAA,GAE5CtB,EAAAA,EAAKuB,UAAU,CACbC,UAAW,CAAC,aAAc,OAAQ,SAAU,UAsE9C,MAAMT,GAAmBU,EAAAA,EAAAA,IAAOC,IAAPD,CAAkBE,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,oI,cC7E5B,SAASC,IACtB,MAAMC,GAASC,EAAAA,EAAAA,OACT,OAAEC,IAAWC,EAAAA,EAAAA,MAInB,OACEC,EAAAA,EAAAA,MAACC,EAAAA,GAAY,IAAKL,EAAMhB,SAAA,EACtBF,EAAAA,EAAAA,KAACwB,EAAAA,GAAU,CACTC,KAAK,WACLC,QAASR,EAAOQ,QAChBC,aAAa,GACbC,OAAQC,IAAA,IAAC,MAAEC,GAAOD,EAAA,OAChBP,EAAAA,EAAAA,MAAA,aAAYQ,EAAK5B,SAAA,EACfF,EAAAA,EAAAA,KAAA,UAAQV,MAAM,GAAEY,SAAC,oCACjBF,EAAAA,EAAAA,KAAA,UAAQV,MAAM,QAAOY,SAAC,wBACtBF,EAAAA,EAAAA,KAAA,UAAQV,MAAM,aAAYY,SAAC,0CAC3BF,EAAAA,EAAAA,KAAA,UAAQV,MAAM,QAAOY,SAAC,mBACf,KAGbF,EAAAA,EAAAA,KAAC+B,EAAAA,EAAUC,MAAK,CAACC,MAAM,OAAO5B,YAAY,2DAAc6B,WAAYhB,EAAOT,SAAS,YACpFT,EAAAA,EAAAA,KAAC+B,EAAAA,EAAUC,MAAK,CAACC,MAAM,OAAO5B,YAAY,2DAAc6B,WAAYhB,EAAOT,SAAS,cACpFT,EAAAA,EAAAA,KAAC1B,EAAW,KACZ0B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAUI,OAAM,CAACC,QAASlB,EAAOmB,cArBVC,IAC1BlB,EAAOkB,EAAK,IAoB0DpC,SAAC,mBAG3E,C,iGChCO,MAAMqC,EAAiB1F,UAC5B,MAAM2F,EAAS,GACf,IACE,MAAMC,GAAIC,EAAAA,EAAAA,IAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,SAASC,EAAAA,EAAAA,IAAQ,YAAa,SAM7D,aAL4BC,EAAAA,EAAAA,IAAQL,IAEtBM,SAAQC,IACpBR,EAAOS,KAAK,IAAKD,EAAKV,OAAQY,GAAIF,EAAKE,IAAK,IAEvCV,CACT,CAAE,MAAOnE,GAEP,MADAF,QAAQE,MAAM,2BAA4BA,GACpCA,CACR,GAGI8E,EAAetG,gBACbuG,EAAAA,EAAAA,KAAOT,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,QAAS,CACnCS,SAAUf,EAAKe,SACf9C,QAAS+B,EAAK/B,QACd+C,MAAOhB,EAAKgB,MACZC,QAASjB,EAAKiB,QACdC,WAAWC,EAAAA,EAAAA,KACXP,GAAI,MACJ,EAGSQ,EAAeA,KACnBC,EAAAA,EAAAA,GAAS,CACdC,SAAU,CAAC,YACXC,QAAStB,IAGAlB,EAAsBA,KAC1ByC,EAAAA,EAAAA,GAAY,CACjBC,WAAYZ,G","sources":["utils/hook/quill/useImageHandler.js","components/AppWindow/windows/blog/components/QuillEditor.jsx","components/AppWindow/windows/blog/TextEdit.jsx","utils/query/useBlogQuery.js"],"sourcesContent":["/*eslint-disable */\r\n\r\nimport { useRef, useState } from 'react'\r\nimport { uploadBytes, getDownloadURL, ref } from 'firebase/storage'\r\nimport { storage } from '../../../firebase'\r\n\r\nconst useImageHandler = () => {\r\n  const [imageUrl, setImageUrl] = useState('')\r\n  const quillRef = useRef(null)\r\n\r\n  const imageHandler = () => {\r\n    const input = document.createElement('input')\r\n    input.setAttribute('type', 'file')\r\n    input.setAttribute('accept', 'image/*')\r\n    input.click()\r\n    input.addEventListener('change', async () => {\r\n      const editor = quillRef.current.getEditor()\r\n      const file = input.files[0]\r\n      const range = editor.getSelection(true)\r\n      try {\r\n        // 파일명을 \"image/Date.now()\"로 저장\r\n        const storageRef = ref(storage, `image/${Date.now()}`)\r\n        // Firebase Method : uploadBytes, getDownloadURL\r\n        await uploadBytes(storageRef, file).then(snapshot => {\r\n          getDownloadURL(snapshot.ref).then(url => {\r\n            // 이미지 URL 에디터에 삽입\r\n            editor.insertEmbed(range.index, 'image', url)\r\n            // URL 삽입 후 커서를 이미지 뒷 칸으로 이동\r\n            editor.setSelection(range.index + 1)\r\n            console.log('url 확인', url)\r\n            setImageUrl(url)\r\n          })\r\n        })\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    })\r\n  }\r\n\r\n  return { imageHandler, quillRef, imageUrl }\r\n}\r\n\r\nexport default useImageHandler\r\n","/* eslint-disable */\r\n\r\nimport React, { useMemo, useRef, useState } from 'react'\r\nimport ReactQuill, { Quill } from 'react-quill'\r\nimport 'react-quill/dist/quill.snow.css'\r\nimport { storage } from '../../../../../firebase'\r\nimport { uploadBytes, getDownloadURL, ref } from 'firebase/storage'\r\nimport ImageResize from 'quill-image-resize'\r\nimport QuillImageDropAndPaste from 'quill-image-drop-and-paste'\r\nimport hljs from 'highlight.js'\r\nimport 'highlight.js/styles/github.css'\r\nimport { useFormContext } from 'react-hook-form'\r\nimport useImageHandler from 'utils/hook/quill/useImageHandler'\r\nimport styled from 'styled-components'\r\n\r\nQuill.register('modules/ImageResize', ImageResize)\r\nQuill.register('modules/imageDropAndPaste', QuillImageDropAndPaste)\r\n\r\nhljs.configure({\r\n  languages: ['javascript', 'ruby', 'python', 'rust'],\r\n})\r\n\r\nexport default function QuillEditor() {\r\n  const { imageHandler, quillRef, imageUrl } = useImageHandler()\r\n\r\n  // 이미지 핸들러\r\n\r\n  const modules = useMemo(() => {\r\n    return {\r\n      toolbar: {\r\n        container: [\r\n          ['image', 'link', 'video', 'code-block'],\r\n          [{ header: [1, 2, 3, false] }],\r\n          ['bold', 'italic', 'underline', 'strike', 'blockquote'],\r\n          [{ color: [] }, { background: [] }],\r\n          [{ list: 'ordered' }, { list: 'bullet' }],\r\n        ],\r\n        handlers: {\r\n          image: imageHandler,\r\n        },\r\n      },\r\n      syntax: {\r\n        highlight: text => hljs.highlightAuto(text).value,\r\n      },\r\n      imageDropAndPaste: {\r\n        // handler: imageDropHandler,\r\n      },\r\n      ImageResize: {\r\n        parchment: Quill.import('parchment'),\r\n        mopdules: ['Resize', 'DisplaySize'],\r\n      },\r\n    }\r\n  }, [])\r\n\r\n  const formats = [\r\n    'header',\r\n    'bold',\r\n    'italic',\r\n    'underline',\r\n    'strike',\r\n    'blockquote',\r\n    'image',\r\n    'code-block',\r\n    'list',\r\n    'link',\r\n  ]\r\n  const { getValues, setValue } = useFormContext()\r\n\r\n  const handleChange = content => {\r\n    setValue('content', content)\r\n    console.log(content)\r\n  }\r\n\r\n  return (\r\n    <div className=\"ql-snow\">\r\n      <ReactQuillStyled\r\n        className=\"ql-editor\"\r\n        ref={quillRef}\r\n        theme=\"snow\"\r\n        placeholder=\"내용을 입력해주세요.\"\r\n        onChange={handleChange}\r\n        modules={modules}\r\n        formats={formats}\r\n        value={getValues('content')}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ReactQuillStyled = styled(ReactQuill)`\r\n  & > .ql-toolbar {\r\n    position: sticky;\r\n  }\r\n  & > .ql-container {\r\n    overflow-x: hidden;\r\n    height: 300px;\r\n  }\r\n`\r\n","/* eslint-disable */\r\n\r\nimport AppWindow from 'components/AppWindow/AppWindow'\r\nimport QuillEditor from './components/QuillEditor'\r\nimport { Controller, FormProvider, useForm } from 'react-hook-form'\r\nimport { useBlogItemMutation } from 'utils/query/useBlogQuery'\r\n\r\n// const options = ['React', 'JavaScript', 'Other'].map((label, index) => ({\r\n//   value: index + 1,\r\n//   label,\r\n// }))\r\n\r\nexport default function TextEdit() {\r\n  const method = useForm()\r\n  const { mutate } = useBlogItemMutation()\r\n  const onClickSubmitButton = data => {\r\n    mutate(data)\r\n  }\r\n  return (\r\n    <FormProvider {...method}>\r\n      <Controller\r\n        name=\"category\" // 폼의 이름\r\n        control={method.control}\r\n        defaultValue=\"\" // 기본값 설정\r\n        render={({ field }) => (\r\n          <select {...field}>\r\n            <option value=\"\">선택하세요</option>\r\n            <option value=\"react\">리액트</option>\r\n            <option value=\"javascript\">자바스크립트</option>\r\n            <option value=\"other\">기타</option>\r\n          </select>\r\n        )}\r\n      />\r\n      <AppWindow.Input width=\"100%\" placeholder=\"제목을 작성해 주세요\" registerFn={method.register('title')} />\r\n      <AppWindow.Input width=\"100%\" placeholder=\"요약을 작성해 주세요\" registerFn={method.register('summary')} />\r\n      <QuillEditor />\r\n      <AppWindow.Button onClick={method.handleSubmit(onClickSubmitButton)}>전송</AppWindow.Button>\r\n    </FormProvider>\r\n  )\r\n}\r\n","/* eslint-disable */\r\n\r\nimport { useQuery, useMutation } from '@tanstack/react-query'\r\nimport { db } from '../../firebase'\r\nimport { collection, doc, addDoc, getDocs, query, where, orderBy } from 'firebase/firestore'\r\nimport getCurrentDate from 'utils/getCurrentDate'\r\n\r\nexport const getAllBlogList = async () => {\r\n  const result = []\r\n  try {\r\n    const q = query(collection(db, 'blog'), orderBy('createdAt', 'desc'))\r\n    const querySnapshot = await getDocs(q)\r\n\r\n    querySnapshot.forEach(item => {\r\n      result.push({ ...item.data(), id: item.id })\r\n    })\r\n    return result\r\n  } catch (error) {\r\n    console.error('Error fetching document:', error)\r\n    throw error\r\n  }\r\n}\r\n\r\nconst postBlogItem = async data => {\r\n  await addDoc(collection(db, 'blog'), {\r\n    category: data.category,\r\n    content: data.content,\r\n    title: data.title,\r\n    summary: data.summary,\r\n    createdAt: getCurrentDate(),\r\n    id: null,\r\n  })\r\n}\r\n\r\nexport const useBlogQuery = () => {\r\n  return useQuery({\r\n    queryKey: ['blogList'],\r\n    queryFn: getAllBlogList,\r\n  })\r\n}\r\nexport const useBlogItemMutation = () => {\r\n  return useMutation({\r\n    mutationFn: postBlogItem,\r\n  })\r\n}\r\n"],"names":["useImageHandler","imageUrl","setImageUrl","useState","quillRef","useRef","imageHandler","input","document","createElement","setAttribute","click","addEventListener","async","editor","current","getEditor","file","files","range","getSelection","storageRef","ref","storage","concat","Date","now","uploadBytes","then","snapshot","getDownloadURL","url","insertEmbed","index","setSelection","console","log","error","QuillEditor","modules","useMemo","toolbar","container","header","color","background","list","handlers","image","syntax","highlight","text","hljs","highlightAuto","value","imageDropAndPaste","ImageResize","parchment","Quill","import","mopdules","getValues","setValue","useFormContext","_jsx","className","children","ReactQuillStyled","theme","placeholder","onChange","content","formats","register","QuillImageDropAndPaste","configure","languages","styled","ReactQuill","_templateObject","_taggedTemplateLiteral","TextEdit","method","useForm","mutate","useBlogItemMutation","_jsxs","FormProvider","Controller","name","control","defaultValue","render","_ref","field","AppWindow","Input","width","registerFn","Button","onClick","handleSubmit","data","getAllBlogList","result","q","query","collection","db","orderBy","getDocs","forEach","item","push","id","postBlogItem","addDoc","category","title","summary","createdAt","getCurrentDate","useBlogQuery","useQuery","queryKey","queryFn","useMutation","mutationFn"],"sourceRoot":""}